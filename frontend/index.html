<!DOCTYPE html>
<html lang="en" data-device-type="mobile">
    <head>
        <!-- Legacy compatible -->
        <!--<meta charset="utf-8" http-equiv="Content-Type" content="text/html; charset=utf-8">-->
        <!--<meta nativeui="true">-->

        <!---->
        <meta charset="utf-8"/>
        <title>Web App Loader</title>

        <!---->
        <meta property="og:locale" content="en">
        <meta http-equiv="content-language" content="en-us">

        <!---->
        <meta name="viewport" content="width=device-width,
            initial-scale=1.0,
            viewport-fit=cover,
            interactive-widget=overlays-content
        "/>
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <meta name="mobile-web-app-capable" content="yes">

        <!-- @vite-ignore -->
        <meta name="theme-color" content="transparent" data-theme-color>

        <!---->
        <meta name="browsermode" content="application">
        <meta name="layoutmode" content="fitscreen">
        <meta name="full-screen" content="yes">

        <!---->
        <meta name="application-name" content="U2RE">
        <meta name="author" content="intendant, unit-404, community">
        <meta name="designer" content="intendant, unit-404, community, Google">
        <meta name="publisher" content="intendant, unit-404, community, Github">

        <!-- -->
        <meta name="distribution" content="web">
        <meta name="dcterms.audience" content="Global">
        <meta name="generator" content="app.runtime">
        <meta name="referrer" content="origin-when-cross-origin">
        <meta name="keywords"
            content="pwa, source, project, intendant, idc, software, experimental, nextgen, ng, 2024, 2025, future, wip, portfolio">

        <!-- CSP local rules -->
        <meta http-equiv="Content-Security-Policy" content="
            default-src https: 'self' blob: data:;
            img-src 'self' * blob: data:;
            style-src 'self' 'unsafe-inline' blob: data:;
            script-src-elem 'self' 'unsafe-inline' node: blob: data:;
            script-src 'self' 'unsafe-inline' 'unsafe-eval' node: blob: data:;
            worker-src 'self' blob:* data:*;
        ">

        <!-- -->
        <base href="./" />

        <!-- -->
        <style data-owner="runtime" data-type="layers">
            @layer u2-props, u2-core, u2-zoom, u2-normalize, ux-agate, ui-system, u2-theme, u2-colors, u2-rows, u2-grid-box, u2-layout;
        </style>


        <!-- critical styles -->
        <style data-owner="runtime" data-type="system">
            @layer ui-system {
                @media screen {
                    *:not(:defined) { --tm-bg-alpha: 0; display: none; background-color: transparent; color: transparent; };

                    /* */
                    :root, :scope, :host, body, :where(*) {
                        dynamic-range-limit: constrained-high;
                        transition-behavior: allow-discrete;
                        interpolate-size: allow-keywords;
                        background-color: transparent;
                        color: transparent;
                        font-display: swap;
                        --tm-bg-alpha: 0;
                    }

                    /* */
                    link, head, script, style, meta { display: none !important; pointer-events: none !important; }

                    /* */
                    html, body {
                        inset: 0px;
                        padding: 0px;
                        margin: 0px;
                        border: none 0px transparent;
                        background-color: black;
                        color: transparent;
                        font-family: Calibri, Carlito, Caliburn, Seravek, 'Gill Sans Nova', Ubuntu, 'DejaVu Sans', Candara, Segoe, "Segoe UI", Optima, source-sans-pro, sans-serif;
                    }

                    /* */
                    a { color: transparent; text-decoration: none; };

                    /* */
                    body {
                        display: grid !important;
                        grid-template-columns: minmax(0px, 1fr) !important;
                        grid-template-rows: minmax(0px, 1fr) !important;
                        position: relative !important;
                        overflow: hidden;
                        flex-direction: column;
                        pointer-events: none;
                        container-type: size;
                        contain: strict;
                    }

                    /* */
                    body > *:not(#vital-test-fail-warning) {
                        max-inline-size: 100% !important;
                        max-block-size: 100% !important;

                        /* */
                        inline-size: 100% !important;
                        block-size: 100% !important;

                        /* */
                        min-inline-size: 0px !important;
                        min-block-size: 0px !important;

                        /* */
                        grid-column: 1 / -1 !important;
                        grid-row: 1 / -1 !important;

                        /* */
                        display: grid;
                        grid-template-columns: minmax(0px, 1fr);
                        grid-template-rows: minmax(0px, 1fr);

                        /* */
                        background-color: transparent !important;
                        pointer-events: none;
                        position: absolute;
                        inset: 0px;

                        /* */
                        inset-inline-end: auto;
                        inset-block-end: auto;
                        overflow: hidden;

                        /* */
                        container-type: size;
                        contain: strict;
                    }

                    /* */
                    #viewport { display: grid; pointer-events: auto; background-color: transparent; };

                    /* #root slot, etc. */
                    #viewport > * { pointer-events: auto; inline-size: 100% !important; block-size: 100% !important; background-color: transparent; }

                    /* */
                    #background > * { position: absolute; inset: 0px; };
                    #overlays > * { position: absolute; inset: 0px; };
                    #viewport > * { position: absolute; inset: 0px; };

					/* fix virtual keyboard and overlays issues */
                    #overlays {
                        inline-size: 100dvi !important;
                        block-size: min(100dvb, var(--view-height, 100dvb)) !important;
                        position: fixed !important;
                    }

                    /* */
                    :where(*) {
                        box-sizing: border-box;
                        transition-behavior: allow-discrete;
                        interpolate-size: allow-keywords;
                    }
                };

                /* */
                @media screen {
                    #viewport {
                        & {
                            background-color: transparent;
                            overflow: hidden;
                            inline-size: 100%;
                            block-size: 100%;
                            padding: 0rem;
                        };
                        & > * { background-color: transparent; };
                    };
                };

                /* */
                @media print {
                    body {
                        min-block-size: 100dvb;
                        block-size: 100dvb;
                    };

                    /* */
                    #viewport {
                        & {
                            container-type: inline-size;
                            min-block-size: max-content;
                            inline-size: 100%;
                            block-size: 100%;
                        };
                        #markdown {
                            inline-size: 100%;
                            container-type: inline-size;
                            min-block-size: 100%;
                            block-size: max-content;
                            text-align: justify;
                        };
                    };
                };
            }
        </style>

        <!-- webpackIgnore: true-->
        <link rel="manifest" href="./pwa/manifest.json">
        <link rel="icon" type="image/png" href="./favicon.png">
        <link rel="apple-touch-icon" href="./favicon.png">

        <!-- -->
        <script data-owner="runtime" data-type="interact">
            // workaround for happy-fs
            if (typeof process == "undefined" || !window?.process) {
                window.process = {
                    env: {
                        NODE_ENV: "production"
                    }
                }
            }

            // avoid any dragging when no-needed...
            document.documentElement.addEventListener("dragstart", (ev) => {
                if (ev?.target?.matches?.("div, img, picture, canvas, video, svg")) {
                    ev.preventDefault();
                }
            }, {passive: false, capture: true});

            // comment to enable native context menu
            document.documentElement.addEventListener("contextmenu", (ev)=>{
                ev.preventDefault();
            });

            //
            if ("virtualKeyboard" in navigator && navigator?.virtualKeyboard) {
                // @ts-ignore
                navigator.virtualKeyboard.overlaysContent = true;
            }

            //
            const media = matchMedia("(((hover: hover) or (pointer: fine)) and ((width >= 9in) or (orientation: landscape)))");
            media?.addEventListener?.("change", (e)=>{
                document.documentElement.dataset.deviceType = e?.matches ? "desktop" : "mobile";
                document.body.dataset.deviceType = e?.matches ? "desktop" : "mobile";
            });

            //
            requestIdleCallback(()=>{
                document.documentElement.dataset.deviceType = media?.matches ? "desktop" : "mobile";
                document.body.dataset.deviceType = media?.matches ? "desktop" : "mobile";
            });
        </script>

        <!-- Web App loader -->
        <script data-owner="runtime" data-type="loader" type="module" async defer>
            import { placeCSSCompatWarning } from "./vital.mjs";

            //
            const APP_JS = "/src/app.ts";
            const SW_JS  = "./pwa/service.mjs";
            if (placeCSSCompatWarning()) (async()=>{
                if (typeof navigator != "undefined") {
                    await navigator?.serviceWorker?.register?.(new URL(/* @vite-ignore */ SW_JS, import.meta.url).href, {scope: "/"})?.catch?.(console.warn.bind(console));
                }
                import(/* @vite-ignore */ `${APP_JS}`)?.then?.((m)=>m?.default?.(document?.querySelector?.("#viewport")))?.catch?.(console.error.bind(console));
            })();
        </script>
    </head>
    <body
        data-device-type="mobile"
        data-scheme="accent"
        data-chroma="1"
        data-alpha="1"
        data-highlight="0"
        style="pointer-events: auto; overflow: hidden;"
    >


        <!-- -->
        <div id="background" class="container u2-container" data-alpha="0">
            <canvas data-src="./assets/wallpaper/stock.webp" id="image" is="ui-canvas" width="1" height="1" style="inline-size: 100%; block-size: 100%;"></canvas>
        </div>
        <div id="viewport" class="container u2-container" data-alpha="0">
            <!--<div id="root"></div>-->
            <!-- Web Application Slot -->
        </div>
        <div id="overlays"   class="container u2-container u2-toplayer" data-alpha="0" style="container-type: normal; block-size: min(100dvb, var(--view-height, 100dvb)) !important; position: fixed !important;">

            <!-- -->
            <ui-statusbar id="statusbar"></ui-statusbar>
            <!--<ui-contextmenu id="contextmenu"></ui-contextmenu>-->
            <ui-focustext
                value=""
                id="focustext"
                class="ui-focus ui-mobile-input ui-dedicated"
                data-chroma="0"
                data-scheme="solid"
                data-highlight="1">
                <input type="text" label="test" placeholder="test-longtext" tabindex="-1" draggable="false" autocomplete="on" class="u2-input" value="" scroll="no"/>
            </ui-focustext>
            <ui-tooltip id="tooltip"></ui-tooltip>
        </div>
    </body>
</html>
